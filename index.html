<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Push Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <h1>Hello Web Pusher</h1>

  <script>
    var _movalio_ = {
      app_id: '1'
    };
    (function () {
      let iframe = document.createElement("iframe");
      iframe.setAttribute("src", "./frames/index.html");
      iframe.setAttribute('id', 'movalio-soft-popup');
      iframe.style.width = "100%";
      iframe.style.height = "200px";
      iframe.style.position = "absolute";
      iframe.style.top = "0";
      iframe.allowtransparency = 'false';
      iframe.frameBorder = '0';
      iframe.scrolling = 'no';

      document.body.appendChild(iframe);

      let iframeEl = document.getElementById('movalio-soft-popup');

      setTimeout(() => {
        iframeEl.contentWindow.postMessage(
          {
            action: 'init',
            content: {
              icon: 'https://media.altpress.com/uploads/2019/04/AP_LOGO_BLUE.png',
              message: 'ALT Press wants to show you breaking news and exclusive content from your favorite artists',
              cancelButton: 'NO THANKS',
              allowButton: 'ALLOW'
            }
          }, '*');
      },60);

      window.addEventListener('message', msg => {
        console.log('Parent', msg);
      }, false);

    })();
  </script>
</body>

</html>